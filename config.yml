# This is the main configuration file of your Dancer2 app
# env-related settings should go to environments/$env.yml
# all the settings in this file will be loaded at Dancer's startup.

# Your application's name
appname: "TalApi"

# The default layout to use for your application (located in
# views/layouts/main.tt)
layout: "main"

# when the charset is set to UTF-8 Dancer2 will handle for you
# all the magic of encoding and decoding. You should not care
# about unicode within your app when this setting is set (recommended).
charset: "UTF-8"

openapi:
        config: "doc/tal-002.yml"

engines:
   logger:
    Console:
      log_format: "%d %l %m%n"

template: "template_toolkit"
engines:
  template:
    template_toolkit:
      ENCODING: utf8
      start_tag: '<%'
      end_tag:   '%>'

# session engine
#
# Simple: in-memory session store - Dancer2::Session::Simple
# YAML: session stored in YAML files - Dancer2::Session::YAML
#
# Check out metacpan for other session storage options:
# https://metacpan.org/search?q=Dancer2%3A%3ASession&search_type=modules
#
# Default value for 'cookie_name' is 'dancer.session'. If you run multiple
# Dancer apps on the same host then you will need to make sure 'cookie_name'
# is different for each app.
#
#engines:
#  session:
#    Simple:
#      cookie_name: testapp.session
#
#engines:
#  session:
#    YAML:
#      cookie_name: eshop.session
#      is_secure: 1
#      is_http_only: 1

# plugins:
#   Auth::Extensible:
#     realms:
#       config:
#         provider: Config
#         users:
#           - user: tal
#             pass: test
#             roles:
#               - server
#               - third_party
basic_auth_user: tal
basic_auth_pass: test

plugins:
  # DBIC:
    # tal:
    #   dsn: "dbi:mysql:dbname=Optima_test;host=jupiter"
  #  test:
  #     dsn: "dbi:SQLite:dbname=t/test.db"
  Database:
    connections:
      test:
        driver: SQLite
        database: 't/test.db'
      dev:
        driver: 'mysql'
        database: 'Optima_test'
        host: 'localhost'
        port: 3306
        username: 'root'
        password: 'gemini2'
        # connection_check_threshold: 10
        dbi_params:
            RaiseError: 1
            AutoCommit: 1
        on_connect_do: ["SET NAMES 'utf8'", "SET CHARACTER SET 'utf8'", "SET SQL_MODE='TRADITIONAL'" ]
        log_queries: 1
      prod:
        driver: 'mysql'
        database: 'Optima'
        host: 'localhost'
        port: 3306
        username: 'root'
        password: 'gemini2'
        # connection_check_threshold: 10
        dbi_params:
            RaiseError: 1
            AutoCommit: 1
        on_connect_do: ["SET NAMES 'utf8'", "SET CHARACTER SET 'utf8'", "SET SQL_MODE='TRADITIONAL'" ]
        log_queries: 1

plugins:
  OpenAPI:
     config: 'doc/tal-002.yml'
